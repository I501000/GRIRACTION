"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createFile = void 0;
const path_1 = require("path");
const fs_1 = require("fs");
const util_1 = require("@sap-cloud-sdk/util");
const { writeFile } = fs_1.promises;
/**
 * @internal
 */
async function createFile(directoryPath, fileName, content, overwrite, withCopyright = true) {
    try {
        return await writeFile((0, path_1.join)(directoryPath, fileName), withCopyright ? wrapContent(content) : content, {
            encoding: 'utf8',
            flag: overwrite ? 'w' : 'wx'
        });
    }
    catch (err) {
        const recommendation = err.code === 'EEXIST' && !overwrite
            ? ' File already exists. If you want to allow overwriting files, enable the `overwrite` flag.'
            : '';
        throw new util_1.ErrorWithCause(`Could not write file "${fileName}".${recommendation}`, err);
    }
}
exports.createFile = createFile;
function wrapContent(content) {
    return ((0, util_1.codeBlock) `
${getCopyrightHeader()}
${content}
` + util_1.unixEOL);
}
function getCopyrightHeader() {
    return (0, util_1.codeBlock) `
/*
 * Copyright (c) ${new Date().getFullYear()} SAP SE or an SAP affiliate company. All rights reserved.
 *
 * This is a generated file powered by the SAP Cloud SDK for JavaScript.
 */
 `;
}
//# sourceMappingURL=create-file.js.map