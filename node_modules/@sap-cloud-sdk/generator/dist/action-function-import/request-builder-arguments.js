"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getRequestBuilderArgumentsBase = void 0;
const common_1 = require("../edmx-to-vdm/common");
const response_transformer_function_1 = require("./response-transformer-function");
/**
 * @internal
 */
function getRequestBuilderArgumentsBase(actionFunctionImport, service) {
    const transformer = getTransformer(actionFunctionImport);
    return [
        `'${service.servicePath}'`,
        `'${actionFunctionImport.originalName}'`,
        transformer,
        'params',
        'deSerializers'
    ];
}
exports.getRequestBuilderArgumentsBase = getRequestBuilderArgumentsBase;
function getTransformer(actionFunctionImport) {
    if ((0, common_1.isEntityNotDeserializable)(actionFunctionImport.returnType)) {
        return `(data) => throwErrorWhenReturnTypeIsUnionType(data, '${actionFunctionImport.originalName}')`;
    }
    if (actionFunctionImport.returnType.builderFunction) {
        return `(data) => ${(0, response_transformer_function_1.responseTransformerFunctionName)(actionFunctionImport.returnType)}(data, ${actionFunctionImport.returnType.builderFunction})`;
    }
    throw Error(`Cannot build function/action import ${actionFunctionImport.originalName} because the builder function: ${actionFunctionImport.returnType.builderFunction} is missing.`);
}
//# sourceMappingURL=request-builder-arguments.js.map